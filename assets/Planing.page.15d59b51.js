import{Q as E,D as R,P as M}from"./PageTitleWithButton.b0e53425.js";import{f as S,Q as N,d as z,e as O}from"./QCarousel.05fa811f.js";import{c as h,i as A,j as v,b as d,Q,R as _}from"./QCard.8092dba0.js";import{c as b,Q as j,b as k,C as x}from"./ClosePopup.fb88ff66.js";import{I as G}from"./InputField.ebc67f31.js";import{u as W}from"./client.store.9f12f916.js";import{u as D,r as q,o as L,M as H,_ as w,x as f,y as i,D as $,d as e,A as a,p as g,F as C,B as r,ac as T,G as y,C as p,E as B,z as u,N as J}from"./index.51a95478.js";import{Q as U,a as V}from"./QList.a0aa69f9.js";import{Q as K}from"./QBadge.893511a3.js";import{Q as X}from"./QMenu.0b46f048.js";import{Q as Y}from"./QAvatar.b1ae1813.js";import{Q as F}from"./QIcon.296b631e.js";import"./rtl.b51694b1.js";import"./format.2a3572e1.js";import"./touch.70a9dd44.js";import"./uid.42677368.js";const Z=D({name:"PlaningTacheAction",components:{InputField:G},setup(){const n=q(!1),l=S(),s=W();L(()=>{s.fetchClients()});const m=H({...{clientId:"",rewindDay:0,prix:0}});return{planingTacheModel:n,planingFormData:m,handleSubmit:async()=>{const o={...m,clientId:m.clientId.id},t=await l.setPlaning(o);console.log(l),t?n.value=!1:console.log("Connot add planing")},clients:s}}}),ee=r("div",{class:"text-h6"},"Planifier une t\xE2che",-1),ne=r("br",null,null,-1),ae=r("br",null,null,-1);function le(n,l,s,c,m,P){const o=f("InputField");return i(),$(C,null,[e(h,{label:"Planifier une t\xE2che",color:"primary",icon:"add",unelevated:"",class:"btn",onClick:l[0]||(l[0]=t=>n.planingTacheModel=!0)}),e(k,{modelValue:n.planingTacheModel,"onUpdate:modelValue":l[4]||(l[4]=t=>n.planingTacheModel=t),persistent:""},{default:a(()=>[e(A,{style:{width:"500px","max-width":"70vw",margin:"auto"}},{default:a(()=>[e(v,null,{default:a(()=>[ee]),_:1}),e(b),ne,e(v,{class:"q-pt-none"},{default:a(()=>[e(N,{options:n.clients.clients,outlined:"","option-label":t=>t.nom,modelValue:n.planingFormData.clientId,"onUpdate:modelValue":l[1]||(l[1]=t=>n.planingFormData.clientId=t),label:"Selectionner le client"},null,8,["options","option-label","modelValue"]),ae,e(o,{required:"",type:"number",label:"Chaque apres",modelValue:n.planingFormData.rewindDay,"onUpdate:modelValue":l[2]||(l[2]=t=>n.planingFormData.rewindDay=t),prefix:"jours"},null,8,["modelValue"]),e(o,{required:"",type:"number",label:"Prix de la sc\xE9ance",prefix:"Fcfa",modelValue:n.planingFormData.prix,"onUpdate:modelValue":l[3]||(l[3]=t=>n.planingFormData.prix=t)},null,8,["modelValue"])]),_:1}),e(b),e(j,{align:"right",class:"text-primary"},{default:a(()=>[g(e(h,{flat:"",label:"Fermer",color:"red",class:"btn"},null,512),[[x]]),e(h,{label:"Planifier",class:"btn btn-custom text-sm",color:"primary",icon:"save",onClick:n.handleSubmit},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var te=w(Z,[["render",le]]);const oe=D({name:"DetailsPlaning",props:{planing:{type:Object,require:!0}},setup(){return{dialog:q(!1),API_URL:T,slide:q(1)}}}),ie={class:"text-h2-custom"},se={class:"q-ma-none"},re={class:"row fit justify-start items-center q-gutter-xs q-col-gutter no-wrap q-ma-none q-pa-none"},de={class:"text-paragraph"},pe={class:"text-paragraph"},ue={class:"text-paragraph"};function ce(n,l,s,c,m,P){return i(),$(C,null,[e(h,{label:"ouvrir",class:"btn",icon:"expand",flat:"",onClick:l[0]||(l[0]=o=>n.dialog=!0)}),e(k,{modelValue:n.dialog,"onUpdate:modelValue":l[2]||(l[2]=o=>n.dialog=o)},{default:a(()=>[e(A,{bordered:"",style:{margin:"auto","max-width":"800px",width:"700px"}},{default:a(()=>[e(v,{class:"q-pt-none q-pb-none q-ma-none"},{default:a(()=>[r("h2",ie,[e(Y,{size:"40px",color:"green-5",class:"q-mr-md"},{default:a(()=>[y(p(n.planing.client.nom[0]),1)]),_:1}),r("span",null,p(n.planing.client.nom)+" "+p(n.planing.client.prenom),1)])]),_:1}),e(b),e(v,null,{default:a(()=>[r("div",se,[e(z,{modelValue:n.slide,"onUpdate:modelValue":l[1]||(l[1]=o=>n.slide=o),"transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",animated:"","control-color":"primary",arrows:"",class:"bg-grey-1 rounded-borders q-ma-none",height:"200px"},{default:a(()=>[(i(!0),$(C,null,B(n.planing.client.images,(o,t)=>(i(),u(O,{class:"column no-wrap",key:t,name:t},{default:a(()=>[r("div",re,[e(E,{class:"rounded-borders col-12 full-height",src:`${n.API_URL}image/${o.path}`},null,8,["src"])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])]),_:1}),e(v,null,{default:a(()=>[e(U,{separator:"",bordered:"",rounded:"10px",class:"rounded-item"},{default:a(()=>[g((i(),u(Q,null,{default:a(()=>[e(d,{avatar:""},{default:a(()=>[e(F,{name:"fa-solid fa-house",class:"icon"})]),_:1}),e(d,null,{default:a(()=>[r("p",de,p(n.planing.client.lieux),1)]),_:1})]),_:1})),[[_]]),g((i(),u(Q,null,{default:a(()=>[e(d,{avatar:""},{default:a(()=>[e(F,{name:"fa-solid fa-wallet",class:"icon"})]),_:1}),g((i(),u(d,null,{default:a(()=>[r("p",pe,p(n.planing.prix)+" FCFA",1)]),_:1})),[[_]])]),_:1})),[[_]]),g((i(),u(Q,null,{default:a(()=>[e(d,{avatar:""},{default:a(()=>[e(F,{name:"fa-solid fa-business-time",class:"icon"})]),_:1}),e(d,null,{default:a(()=>[r("p",ue,"Dans "+p(n.planing.rewindDay)+" jours",1)]),_:1})]),_:1})),[[_]])]),_:1})]),_:1}),e(b),e(j,{class:"justify-end"},{default:a(()=>[g(e(h,{flat:"",class:"btn",color:"red",label:"Fermer"},null,512),[[x]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var me=w(oe,[["render",ce]]);const ge=D({name:"PlaningComponent",components:{DeletePermissionAction:R,DetailsPlaningComponent:me},props:{planing:{type:Object,require:!0}},setup(n){const l=S();async function s(){var c;await l.deletePlaning((c=n.planing)==null?void 0:c.id)}return{API_URL:T,handleDelete:s}}}),fe=["src"];function _e(n,l,s,c,m,P){const o=f("details-planing-component"),t=f("delete-permission-action");return g((i(),u(Q,{clickable:"",class:"item-p"},{default:a(()=>[e(d,{thumbnail:""},{default:a(()=>[n.planing.client.images[0]?(i(),$("img",{key:0,src:`${n.API_URL}image/${n.planing.client.images[0].path}`,class:"device rounded-item",alt:""},null,8,fe)):J("",!0)]),_:1}),e(d,null,{default:a(()=>[e(V,null,{default:a(()=>[y(p(n.planing.client.lieux),1)]),_:1}),e(V,{caption:"",lines:"2"},{default:a(()=>[y(" dans "),e(K,{label:`${n.planing.rewindDay} jours `},null,8,["label"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(V,null,{default:a(()=>[y(p(n.planing.client.nom)+" "+p(n.planing.client.prenom),1)]),_:1}),e(V,{caption:""},{default:a(()=>[y(p(n.planing.client.tel),1)]),_:1})]),_:1}),e(d,{avatar:""},{default:a(()=>[e(h,{icon:"fa-solid fa-caret-down",color:"primary",unelevated:"",rounded:"",flat:""},{default:a(()=>[e(X,{outline:""},{default:a(()=>[e(U,{style:{width:"100%"},bordered:""},{default:a(()=>[e(o,{planing:n.planing},null,8,["planing"]),e(b),e(t,{action:n.handleDelete,label:"suprimer",icon:"delete",color:"red","delete-msg-title":"Souhaitez vous suprimer ce planing ?","delete-msg-content":"La supression de ce planning entraineras la supression de toutes les t\xE2ches qui y sont associ\xE9s","custom-btn":!0},null,8,["action"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),[[_]])}var he=w(ge,[["render",_e]]);const be=D({name:"PlaningsComponent",components:{PlaningComponent:he},props:{planings:{type:Object,require:!0}}}),$e=r("h2",{class:"text-h3-custom"}," Taches programm\xE9es ",-1);function Pe(n,l,s,c,m,P){const o=f("planing-component");return i(),u(A,{flat:"",bordered:"",class:"card-custom"},{default:a(()=>[e(U,{separator:"",bordered:""},{default:a(()=>[g((i(),u(Q,null,{default:a(()=>[$e]),_:1})),[[_]]),e(b),(i(!0),$(C,null,B(n.planings,(t,I)=>(i(),u(o,{key:I,planing:t},null,8,["planing"]))),128))]),_:1})]),_:1})}var ye=w(be,[["render",Pe]]);const ve=D({name:"PlaningPlage",components:{PageTitleWithButton:M,PlaningTacheAction:te,PlaningsComponent:ye},setup(){const n=S();return L(()=>{n.fetchPlaning()}),{planingStore:n,handleDelete:async s=>{await n.deletePlaning(s),console.log("data deleted")},head:["clietId","prix","id"]}}});function Qe(n,l,s,c,m,P){const o=f("planing-tache-action"),t=f("page-title-with-button"),I=f("planings-component");return i(),$(C,null,[e(t,{title:"Planification"},{default:a(()=>[e(o)]),_:1}),e(I,{planings:n.planingStore.planings},null,8,["planings"])],64)}var Ee=w(ve,[["render",Qe]]);export{Ee as default};
