import{Q as o}from"./QBadge.893511a3.js";import{Q as p}from"./QAvatar.b1ae1813.js";import{i as j,j as Q,Q as w,b as C,c as m,R as D}from"./QCard.8092dba0.js";import{Q as N,a as i}from"./QList.a0aa69f9.js";import{Q as q,b as B,c as H,C as V}from"./ClosePopup.fb88ff66.js";import{Q as $}from"./QMenu.0b46f048.js";import{i as S,a1 as O,u as I,a2 as L,v as P,r as R,_ as T,a3 as U,j as E,y as t,D as A,z as n,A as a,d as s,N as u,B as r,C as l,p as v,G as c}from"./index.51a95478.js";import{f as G,a as M}from"./index.a88b22f4.js";function F(){return S(O)}const K=I({name:"AvatarComponent",props:{size:{type:Number,default:()=>40},isHead:{type:Boolean,default:()=>!1},presence:{type:Object,default:()=>null}},setup(e){const d=L(),b=P();F();const f=R(!1),_=async()=>{await U.remove("token"),E.defaults.headers.common.Authorization=null,d.push("/login")};function k(h){return G(new Date(h),new Date,{addSuffix:!0,locale:M})}function g(h){const y=new Date(h);return y.getUTCHours()+":"+y.getUTCMinutes()}function z(){e.presence.presence&&(f.value=!0)}return{handleDisconect:_,user:b,statusDialog:f,fromNow:k,getHour:g,showDialog:z}}}),J={class:""},W=r("img",{src:"/public/avatar/Avatar.jpg",alt:""},null,-1),X={key:0},Y=r("img",{src:"/public/avatar/Avatar.jpg",alt:""},null,-1),Z={class:"text-h6"},x={class:"q-pa-md",style:{"max-width":"100%"}},ee=r("img",{src:"/public/avatar/Avatar.jpg",alt:""},null,-1),ae={class:"row no-wrap q-pa-md"},se=r("div",{class:"column"},[r("div",{class:"text-h6 q-mb-md"},"Guihon")],-1),te={class:"column items-center"},re=r("img",{src:"/public/avatar/Avatar.jpg",alt:""},null,-1),ne={class:"text-subtitle1 q-mt-md q-mb-xs"};function oe(e,d,b,f,_,k){return t(),A("div",J,[e.isHead?(t(),n(m,{key:1,round:""},{default:a(()=>[s(p,{size:`${e.size}px`},{default:a(()=>[ee]),_:1},8,["size"]),s($,null,{default:a(()=>[r("div",ae,[se,s(H,{vertical:"",inset:"",class:"q-mx-lg"}),r("div",te,[s(p,{size:"72px"},{default:a(()=>[re]),_:1}),r("div",ne,l(e.user.user.nom)+" "+l(e.user.user.prenom),1),s(m,{color:"red",label:"Deconnexion",flat:"",size:"sm",to:"/login",onClick:e.handleDisconect},null,8,["onClick"])])])]),_:1})]),_:1})):(t(),n(m,{key:0,round:"",onClick:e.showDialog},{default:a(()=>[s(p,{size:`${e.size}px`},{default:a(()=>[W,e.presence!==null&&e.presence.presence?(t(),A("div",X,[!e.presence.presence||Object.keys(e.presence.presence).length<=0?(t(),n(o,{key:0,color:"negative",rounded:"",floating:""})):u("",!0),e.presence.presence&&Object.keys(e.presence.presence).length>=0&&e.presence.presence.ended===!1?(t(),n(o,{key:1,color:"warning",rounded:"",floating:""})):u("",!0),e.presence.presence&&Object.keys(e.presence.presence).length>=0&&e.presence.presence.ended===!0?(t(),n(o,{key:2,color:"positive",rounded:"",floating:""})):u("",!0)])):u("",!0)]),_:1},8,["size"]),s(B,{modelValue:e.statusDialog,"onUpdate:modelValue":d[0]||(d[0]=g=>e.statusDialog=g),persistent:""},{default:a(()=>[s(j,{style:{width:"500px","max-width":"70vw",margin:"auto"}},{default:a(()=>[s(Q,{class:"abs-center column"},{default:a(()=>[s(p,{size:"120px"},{default:a(()=>[Y]),_:1}),r("div",Z,l(e.presence.nom)+" "+l(e.presence.prenom),1)]),_:1}),s(Q,{class:"q-pt-none"},{default:a(()=>[r("div",x,[s(N,{bordered:"",separator:""},{default:a(()=>[v((t(),n(w,{clickable:""},{default:a(()=>[s(C,null,{default:a(()=>[s(i,null,{default:a(()=>[c("Heure d'arriv\xE9e")]),_:1}),e.presence&&e.presence.presence.created_at?(t(),n(i,{key:0,caption:""},{default:a(()=>[s(o,{label:e.getHour(e.presence.presence.created_at),color:"black"},null,8,["label"]),c(" "+l(e.fromNow(e.presence.presence.created_at)),1)]),_:1})):(t(),n(i,{key:1,caption:""},{default:a(()=>[s(o,{label:"Absent",color:"red"}),c(" Pas encore sur les locaux guihon ")]),_:1}))]),_:1})]),_:1})),[[D]]),e.presence&&e.presence.presence&&e.presence.presence.ended?v((t(),n(w,{key:0,clickable:""},{default:a(()=>[s(C,null,{default:a(()=>[s(i,null,{default:a(()=>[c("Heure de de depart")]),_:1}),s(i,{caption:""},{default:a(()=>[s(o,{label:e.getHour(e.presence.presence.updated_at),color:"primary"},null,8,["label"]),c(" "+l(e.fromNow(e.presence.presence.updated_at)),1)]),_:1})]),_:1})]),_:1})),[[D]]):u("",!0)]),_:1})])]),_:1}),s(q,{align:"right",class:"text-primary"},{default:a(()=>[v(s(m,{flat:"",label:"Fermer",color:"red",class:"btn"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["onClick"]))])}var ge=T(K,[["render",oe]]);export{ge as A};
