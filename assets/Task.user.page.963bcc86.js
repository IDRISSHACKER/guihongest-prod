import{Q as k}from"./QAvatar.b1ae1813.js";import{j as y,c as v,Q,b as p,i as C}from"./QCard.8092dba0.js";import{Q as S,a as f}from"./QList.a0aa69f9.js";import{P as w}from"./PageTitle.02c2ae12.js";import{u as E}from"./presence.store.f6bb8baf.js";import{_ as $,u as x,v as B,r as L,o as I,ac as j,y as o,D as u,B as h,d as t,A as s,z as b,N as P,F as N,E as R,x as V,G as c,C as l}from"./index.51a95478.js";import{u as q}from"./tache.store.31d2c554.js";import"./QIcon.296b631e.js";const A=x({name:"UserTaskPage",components:{PageTitle:w},setup(){const a=E(),r=B(),d=q(),m=L();I(async()=>{await d.fetchTache();const n=[];let e={};await d.taches.forEach(i=>{e=i,i.employes.forEach(T=>{T.id===r.user.id&&n.push(e)})}),m.value=n});async function _(){const e={userId:r.user.id};return await a.handleSetPresence(e),await r.handleRequestProfile(),!0}async function g(){var e;const n=(e=r.user.presence)==null?void 0:e.id;return await a.handleEndDay(n),await r.handleRequestProfile(),!0}return{handleStart:_,presenceStore:a,handleEndDay:g,user:r,usersTaches:m,API_URL:j}}}),D={key:0},U={class:"abs-center"},z={key:1},F=["src"];function O(a,r,d,m,_,g){const n=V("PageTitle");return Object.keys(a.user.user.presence).length<=0?(o(),u("div",D,[h("div",null,[t(y,{style:{display:"flex","align-items":"center","justify-content":"center"}},{default:s(()=>[t(k,{size:"90px",color:"green-4"},{default:s(()=>[c(l(a.user.user.nom[0]),1)]),_:1})]),_:1})]),t(n,{title:`Bienvenue, ${a.user.user.nom} ${a.user.user.prenom}`,subtitle:"Pour confirmer votre pr\xE9sense dans les locaux de guihon, vous devez cliquer sur ce bouton"},null,8,["title"]),h("div",U,[Object.keys(a.user.user.presence).length<=0?(o(),b(v,{key:0,unelevated:"","icon-right":"fa-solid fa-check-circle",label:"Commencer ma journ\xE9e",class:"btn",color:"primary",onClick:a.handleStart},null,8,["onClick"])):P("",!0)])])):(o(),u("div",z,[t(n,{title:"Vos taches"}),h("div",null,[(o(!0),u(N,null,R(a.usersTaches,(e,i)=>(o(),b(C,{flat:"",bordered:"",class:"q-mb-md",key:i},{default:s(()=>[t(y,null,{default:s(()=>[t(S,null,{default:s(()=>[t(Q,null,{default:s(()=>[t(p,{avatar:""},{default:s(()=>[e.planing.client.images[0]?(o(),u("img",{key:0,src:`${a.API_URL}image/${e.planing.client.images[0].path}`,class:"img",style:{width:"100px",height:"auto","border-radius":"2px"},alt:""},null,8,F)):P("",!0)]),_:2},1024),t(p,null,{default:s(()=>[t(f,{class:"text-h3-custom"},{default:s(()=>[c(l(e.planing.client.lieux),1)]),_:2},1024),t(f,null,{default:s(()=>[c(l(e.title),1)]),_:2},1024),t(f,{caption:""},{default:s(()=>[c(l(e.planing.client.nom)+" "+l(e.planing.client.prenom),1)]),_:2},1024)]),_:2},1024),t(p,{avatar:""},{default:s(()=>[t(v,{icon:"fa-solid fa-chevron-right",round:"",flat:""})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]))}var Z=$(A,[["render",O]]);export{Z as default};
