import{Q as y}from"./QBadge.893511a3.js";import{Q as k,a as i}from"./QList.a0aa69f9.js";import{i as p,j as c,Q as C,b as w,c as q}from"./QCard.8092dba0.js";import{P as D}from"./PageTitle.02c2ae12.js";import{u as P}from"./presence.store.f6bb8baf.js";import{_ as S,u as v,v as N,y as u,D as E,d as a,A as r,z as f,N as m,F as T,x as B,G as d,C as Q,B as H}from"./index.51a95478.js";import{f as j,a as I}from"./index.a88b22f4.js";import"./QIcon.296b631e.js";const V=v({name:"UserTimePage",components:{PageTitle:D},setup(){const e=P(),n=N();async function _(){const t={userId:n.user.id};return await e.handleSetPresence(t),await n.handleRequestProfile(),!0}function g(s){return j(new Date(s),new Date,{addSuffix:!0,locale:I})}function h(s){const t=new Date(s);return t.getUTCHours()+":"+t.getUTCMinutes()}async function b(){var t;const s=(t=n.user.presence)==null?void 0:t.id;return await e.handleEndDay(s),await n.handleRequestProfile(),!0}return{handleStart:_,presenceStore:e,handleEndDay:b,user:n,fromNow:g,getHour:h}}}),$={key:0,class:""},F=H("p",{class:"text-paragraph"},"Cette action permet de signaler que votre journ\xE9e prends fin et que l'ensemble des t\xE2ches qui vous ont \xE9t\xE9 attribu\xE9 sont terminer",-1);function L(e,n,_,g,h,b){var t;const s=B("PageTitle");return u(),E(T,null,[a(s,{class:"q-mt-xl q-mb-md",title:"Horaire"}),Object.keys(e.user.user.presence).length>0?(u(),E("div",$,[a(p,{flat:"",bordered:""},{default:r(()=>[a(c,null,{default:r(()=>[a(k,null,{default:r(()=>[a(C,null,{default:r(()=>[a(w,null,{default:r(()=>[e.user.user.presence&&e.user.user.presence.created_at?(u(),f(i,{key:0},{default:r(()=>{var l,o;return[a(y,{label:e.getHour((l=e.user.user.presence)==null?void 0:l.created_at),color:"black"},null,8,["label"]),d(" "+Q(e.fromNow((o=e.user.user.presence)==null?void 0:o.created_at)),1)]}),_:1})):m("",!0),a(i,{caption:""},{default:r(()=>[d("Heure d'arriv\xE9")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(t=e.user.user.presence)!=null&&t.ended?(u(),f(p,{key:1,flat:"",bordered:"",class:"q-mt-md"},{default:r(()=>[a(c,null,{default:r(()=>[a(k,null,{default:r(()=>[a(C,null,{default:r(()=>[a(w,null,{default:r(()=>[e.user.user.presence&&e.user.user.presence.ended?(u(),f(i,{key:0},{default:r(()=>{var l,o;return[a(y,{label:e.getHour((l=e.user.user.presence)==null?void 0:l.updated_at),color:"primary"},null,8,["label"]),d(" "+Q(e.fromNow((o=e.user.user.presence)==null?void 0:o.updated_at)),1)]}),_:1})):m("",!0),a(i,{caption:""},{default:r(()=>[d("Heure de depart")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(u(),f(p,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:r(()=>[a(c,null,{default:r(()=>[F]),_:1}),a(c,null,{default:r(()=>[a(q,{class:"btn",onClick:e.handleEndDay,color:"primary",unelevated:"","icon-right":"fa-solid fa-check-circle"},{default:r(()=>[d("Fin de la journ\xE9e")]),_:1},8,["onClick"])]),_:1})]),_:1}))])):m("",!0)],64)}var J=S(V,[["render",L]]);export{J as default};
